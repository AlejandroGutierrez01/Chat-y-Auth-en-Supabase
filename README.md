
# Chat en Línea con Ionic y Supabase - Deber de Repaso

Una app sencilla y moderna de chat en tiempo real, creada con Ionic y potenciada por Supabase como backend. Los usuarios pueden registrarse, iniciar sesión, confirmar su correo y empezar a chatear con cualquier persona conectada.

## Desarrollado por
- Isaac Quinapallo
- Alejandro Gutierrez

_Este proyecto nació a partir de un excelente tutorial de Devdactic:_ [Supabase & Ionic - Build a Realtime Chat App](https://devdactic.com/supabase-ionic)

---

## ¿Qué puedes hacer con esta app?

- **Autenticación de Usuarios**
  - Registro e inicio de sesión.
  - Confirmación de correo electrónico mediante enlace.
- **Chat en Tiempo Real**
  - Visualización de mensajes instantáneos.
  - Muestra del remitente y hora del mensaje.
- **Gestión de Sesión**
  - Cierre de sesión disponible.

## Tecnologías que usamos

- **Ionic Framework** (Angular)
- **Supabase (BaaS)**
  - Autenticación
  - Realtime Database (PostgreSQL)
- **TypeScript**

## Antes de comenzar...

- Node.js y npm instalados
- Ionic CLI: `npm install -g @ionic/cli`
- Cuenta de Supabase: [https://supabase.com](https://supabase.com)

## ¿Cómo lo pongo a funcionar?

1. **Clonar el Repositorio**
    ```bash
    git clone https://github.com/AlejandroGutierrez01/Chat-y-Auth-en-Supabase.git
    cd Chat-y-Auth-en-Supabase
    ```

2. **Instalar Dependencias**
    ```bash
    npm install
    ```

3. **Configurar Supabase**

### Crear Proyecto y Credenciales

1. Crea un nuevo proyecto en [Supabase](https://supabase.com).
2. En **Project Settings > API**, copia tu `Project URL` y `anon public key`.
3. Crea/modifica `src/supabaseClient.ts` con:
    ```ts
    export const environment = {
      supabaseUrl: 'TU_SUPABASE_URL',
      supabaseKey: 'TU_SUPABASE_ANON_KEY'
    };
    ```

### Crear tabla `messagesChat`

```sql
CREATE TABLE public.messagesChat (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  content TEXT,
  email TEXT
);
```

![Tabla creada](https://github.com/user-attachments/assets/e0312c55-a61b-4fab-aefe-95ead2588629)

### Habilitar RLS y Políticas

1. Ve a **Authentication > Policies**
2. Selecciona `messagesChat` y haz clic en **"Enable RLS"**
3. Crea las siguientes políticas:

#### Lectura

- **Nombre:** Allow authenticated read access
- **Rol:** authenticated
- **Expresión:** `true`
- **Operación:** SELECT

#### Escritura

- **Nombre:** Allow individual insert access
- **Rol:** authenticated
- **Expresión:** `auth.email() = email`
- **Operación:** INSERT

![Políticas de seguridad](https://github.com/user-attachments/assets/eff926d7-88ff-4e8b-ab5c-b922e43a5245)

### Confirmación por Correo

1. En **Authentication > Templates**, activa "Confirm signup".
2. En **Authentication > Settings > General**, define el `Site URL` como `http://localhost:8100`.

4. **Habilitar confirmación de correo**
   - Asegúrate que "Enable email confirmations" esté activa.

---

## ¡Hora de probarla!

```bash
ionic serve
```

- Luego abre: [http://localhost:8100](http://localhost:8100)

---

## Así se ve

### Confirmación de Email
![Confirmación Email](https://github.com/user-attachments/assets/d23e4d12-25ef-46c6-9e0a-79978dd6c738)

### Registro Exitoso
![Registro Exitoso](https://github.com/user-attachments/assets/6105fb17-8843-47b1-8793-c96c267c50d1)

### Login / Registro
![Login](https://github.com/user-attachments/assets/f72ab319-1ef7-421c-b265-a5e67474e9be)

### Interfaz del Chat
![Chat General](https://github.com/user-attachments/assets/a4ed1716-7e89-4d03-bcac-bcb33be7f1f3)

### Envío de Mensajes
![Enviando](https://github.com/user-attachments/assets/86cf7236-c49d-475e-9656-4bb8238c17bc)

---
