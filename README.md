# Chat en Línea con Ionic y Supabase - Deber de Repaso

Este proyecto es una aplicación de chat en tiempo real desarrollada con Ionic y Supabase como backend. Permite a los usuarios registrarse, iniciar sesión, confirmar su correo electrónico y chatear con otros usuarios conectados.

**Desarrollado por:**
*   Isaac Quinapallo
*   Alejandro Gutierrez

**Basado en el ejercicio:** [Supabase & Ionic - Build a Realtime Chat App](https://devdactic.com/supabase-ionic)

## Características Principales

*   **Autenticación de Usuarios:**
    *   Registro de nuevos usuarios.
    *   Inicio de sesión para usuarios existentes.
    *   Confirmación de correo electrónico mediante un enlace enviado al email del usuario.
*   **Chat en Tiempo Real:**
    *   Envío y recepción de mensajes instantáneos.
    *   Visualización de mensajes con el correo del remitente y la hora de envío.
*   **Gestión de Sesión:**
    *   Posibilidad de cerrar sesión.

## Tecnologías Utilizadas

*   **Ionic Framework** (presumiblemente con Angular)
*   **Supabase** (Backend as a Service):
    *   Autenticación
    *   Base de Datos en tiempo real (PostgreSQL con Realtime)
*   **TypeScript**

## Prerrequisitos

*   Node.js y npm instalados.
*   Ionic CLI instalado (`npm install -g @ionic/cli`).
*   Una cuenta de Supabase ([supabase.com](https://supabase.com/)).

## Configuración del Proyecto

1.  **Clonar el Repositorio:**
    ```bash
    git clone [https://github.com/tu-usuario/tu-repositorio.git](https://github.com/AlejandroGutierrez01/Chat-y-Auth-en-Supabase.git)
    cd tu-repositorio
    ```

2.  **Instalar Dependencias:**
    ```bash
    npm install
    # o si usas yarn
    # yarn install
    ```

3.  **Configurar Supabase:**
    *   Crea un nuevo proyecto en [Supabase](https://supabase.com/).
    *   Ve a la sección **Project Settings** > **API**. Copia tu **Project URL** y tu **anon public key**.
    *   En el proyecto Ionic, crea (si no existe) o modifica el archivo `src/environments/environment.ts` (y `src/environments/environment.prod.ts` para producción) con tus credenciales de Supabase:
        ```typescript
        export const environment = {
          production: false,
          supabaseUrl: 'TU_SUPABASE_URL',
          supabaseKey: 'TU_SUPABASE_ANON_KEY'
        };
        ```
    *   **Crear la tabla de mensajes en Supabase:**
        Ve al **SQL Editor** en tu dashboard de Supabase y ejecuta el siguiente script para crear la tabla `messages` (o la estructura que hayas definido, esta es una sugerencia común):
        ```sql
        CREATE TABLE messages (
          id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
          content TEXT,
          created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
          user_email TEXT -- o user_id si prefieres referenciar a auth.users
        );
        -- Habilitar RLS (Row Level Security) para la tabla
        ALTER TABLE messages ENABLE ROW LEVEL SECURITY;

        -- Crear políticas para permitir lectura y escritura
        -- Permitir a los usuarios autenticados leer todos los mensajes
        CREATE POLICY "Allow authenticated users to read messages"
        ON messages
        FOR SELECT
        TO authenticated
        USING (true);

        -- Permitir a los usuarios autenticados insertar sus propios mensajes
        CREATE POLICY "Allow authenticated users to insert their own messages"
        ON messages
        FOR INSERT
        TO authenticated
        WITH CHECK (auth.email() = user_email); -- o auth.uid() = user_id
        ```
    *   **Configurar la plantilla de correo de confirmación en Supabase:**
        En tu proyecto de Supabase, ve a **Authentication** > **Templates**. Asegúrate de que la plantilla "Confirm signup" esté activa.
        En **Authentication** > **Settings** > **General**, configura el **Site URL**. Para desarrollo local, esto suele ser `http://localhost:8100` (o el puerto que estés usando). Esto es importante para que el enlace de confirmación redirija correctamente a tu aplicación.

4.  **Habilitar la confirmación de correo (Opcional, pero recomendado):**
    En Supabase, ve a **Authentication** > **Settings** > **General**. Asegúrate que la opción "Enable email confirmations" esté activada.

## Ejecución de la Aplicación

1.  Para correr la aplicación en el navegador en modo desarrollo:
    ```bash
    ionic serve
    ```
2.  Abre tu navegador y ve a `http://localhost:8100` (o el puerto que Ionic indique).

## Capturas de Pantalla

1.  **Confirmación de Email Recibida:**
    *Cuando un usuario se registra, recibe un email para confirmar su cuenta.*
    ![Confirmación de Email](URL_DE_TU_IMAGEN_1_CONFIRM_EMAIL.png)
    *(Reemplaza `URL_DE_TU_IMAGEN_1_CONFIRM_EMAIL.png` con la ruta relativa a tu imagen en el repo, ej: `screenshots/confirm_email.png`)*

2.  **Mensaje de Registro Exitoso:**
    *Después de completar el formulario de registro, se informa al usuario que verifique su email.*
    ![Registro Exitoso](URL_DE_TU_IMAGEN_2_REGISTRO_EXITOSO.png)
    *(Reemplaza `URL_DE_TU_IMAGEN_2_REGISTRO_EXITOSO.png` con la ruta relativa a tu imagen en el repo)*

3.  **Pantalla de Login / Registro:**
    *Interfaz principal para que los usuarios inicien sesión o se registren.*
    ![Pantalla de Login/Registro](URL_DE_TU_IMAGEN_3_LOGIN_REGISTRO.png)
    *(Reemplaza `URL_DE_TU_IMAGEN_3_LOGIN_REGISTRO.png` con la ruta relativa a tu imagen en el repo)*

4.  **Interfaz del Chat (Vista General):**
    *Una vez iniciada la sesión y confirmado el correo, el usuario accede al chat donde puede ver los mensajes.*
    ![Interfaz del Chat - Vista General](URL_DE_TU_IMAGEN_4_CHAT_GENERAL.png)
    *(Reemplaza `URL_DE_TU_IMAGEN_4_CHAT_GENERAL.png` con la ruta relativa a tu imagen en el repo)*

5.  **Interfaz del Chat (Enviando Mensaje):**
    *Campo para escribir y enviar nuevos mensajes al chat.*
    ![Interfaz del Chat - Enviando Mensaje](URL_DE_TU_IMAGEN_5_CHAT_ENVIAR.png)
    *(Reemplaza `URL_DE_TU_IMAGEN_5_CHAT_ENVIAR.png` con la ruta relativa a tu imagen en el repo)*

---

*Nota: Asegúrate de subir las imágenes a una carpeta dentro de tu repositorio (por ejemplo, una carpeta llamada `screenshots`) y luego actualiza las URLs en el README para que apunten a esas imágenes relativas.*
*Ejemplo: Si subes `confirm_your_signup.png` a una carpeta `screenshots`, el enlace sería `![Confirmación de Email](screenshots/confirm_your_signup.png)`*
